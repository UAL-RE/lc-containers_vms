<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>A gentle, hands-on introduction to containers and virtual machines: Creating Containers with Docker</title><meta name="viewport" content="width=device-width, initial-scale=1"><script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/lc/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicons/lc/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicons/lc/favicon-16x16.png"><link rel="manifest" href="../favicons/lc/site.webmanifest"><link rel="mask-icon" href="../favicons/lc/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" media="(prefers-color-scheme: light)" content="white"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="black"></head><body>
    <header id="top" class="navbar navbar-expand-md top-nav library"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="lc-logo" alt="Lesson Description" src="../assets/images/library-logo.svg"><span class="badge text-bg-danger">
          <abbr title="This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.">
            <a href="https://docs.carpentries.org/resources/curriculum/lesson-life-cycle.html" class="external-link alert-link">
              <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
              Pre-Alpha
            </a>
            <span class="visually-hidden">This lesson is in the pre-alpha phase, which means that it is in early development, but has not yet been taught.</span>
          </abbr>
        </span>

      </div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text"><li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul></li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../containers-part2.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav library" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Lesson Description" src="../assets/images/library-logo-sm.svg"></div>
    <div class="lesson-title-md">
      A gentle, hands-on introduction to containers and virtual machines
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            A gentle, hands-on introduction to containers and virtual machines
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  A gentle, hands-on introduction to containers and virtual machines
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 54%" class="percentage">
    54%
  </div>
  <div class="progress library">
    <div class="progress-bar library" role="progressbar" style="width: 54%" aria-valuenow="54" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text"><li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul></li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../containers-part2.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="introduction.html">1. Introduction</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="virtualmachines.html">2. Virtual machines using VirtualBox</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="containers-part1.html">3. Basics of Containers with Docker</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        4. Creating Containers with Docker
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#introduction">Introduction</a></li>
<li><a href="#dockerfiles">Dockerfiles</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr><li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources"><a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/containers-part1.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/index.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/containers-part1.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Basics of Containers
        </a>
        <a class="chapter-link float-end" href="../instructor/index.html" rel="next">
          Home
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Creating Containers with Docker</h1>
        <p>Last updated on 2025-06-24 |

        <a href="https://github.com/carpentries/workbench-template-md/edit/main/episodes/containers-part2.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>



        <p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 80 minutes</p>

        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How do you create new Docker images?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Explain how a Dockerfile is used to create Docker images</li>
<li>Create a Dockerfile to run a command</li>
<li>Use <code>docker build</code> to create a new image</li>
<li>Update a Dockerfile to run a Python script</li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a></h2>
<hr class="half-width"><p>In the previous episode, we used a Docker image to run a Docker
container. We briefly covered how images are used to make a container,
but where does the Docker image come from? In this episode, we will
create and use Dockerfiles to make a new <em>image</em>, and use that
image to start a Docker container.</p>
</section><section><h2 class="section-heading" id="dockerfiles">Dockerfiles<a class="anchor" aria-label="anchor" href="#dockerfiles"></a></h2>
<hr class="half-width"><p>A Dockerfile is a plain text file that includes instructions for
making a Docker image. Dockerfiles can be very short or very long,
depending on how complicated the Docker image is going to be. A minimal
Dockerfile would have two pieces of information:</p>
<ol style="list-style-type: decimal"><li>The base image to start from, and</li>
<li>What to do when the container starts running</li>
</ol><p>The first point (the base image) may seem a little odd, as it appears
we are actually building an image from…another image? And that is
exactly what we are doing!</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>It is possible for you to start from an operating system image
(e.g. from an ISO file), but there are <em>a lot</em> of Docker images
already available for whichever operating system you want to use. But
let us not make even more work for ourselves. It’s turtles all the way
down and that’s OK.</p>
</div>
</div>
</div>
<div class="section level3">
<h3 id="dockerfile-gross-anatomy">Dockerfile gross anatomy<a class="anchor" aria-label="anchor" href="#dockerfile-gross-anatomy"></a></h3>
<p>The general structure of a Dockerfile is a series of keywords
followed by some information. For the minimal Dockerfile we are going to
build, we need to include commands to accomplish the two points we
mentioned above (identify the base image and do something when the
container starts):</p>
<ol style="list-style-type: decimal"><li>The <code>FROM</code> command is followed by the name of the image
to start from and the version number of that image. When we use the
Dockerfile to build the Docker image, our computer will start by
downloading a copy of that base image, and adding to based on whatever
subsequent commands we provide in the Dockerfile.</li>
<li>The <code>CMD</code> command tells the container what to do when it
starts running. In some cases, it will start an application, like we saw
with the OpenRefine image in the previous episode. The <code>CMD</code>
command can also do things like run analyses based on data passed to the
container.</li>
</ol><p>For this episode, we will start by creating a Dockerfile with only
these two commands:</p>
<pre><code>FROM python:3.9
CMD ["python", "--version"]</code></pre>
</div>
<div class="section level3">
<h3 id="creating-dockerfiles">Creating Dockerfiles<a class="anchor" aria-label="anchor" href="#creating-dockerfiles"></a></h3>
<p>As mentioned above, Dockerfile are plain text files, so we need to
use a text editor to create them. In the virtual machine where we are
working, the nano text editor will work for us. To create the
Dockerfile, start by opening up the command line terminal again (or
opening a new tab if the terminal is already running) and running the
following:</p>
<pre><code>nano Dockerfile</code></pre>
<p>This command will do two things: first, it creates an empty text file
called “Dockerfile” and, second, it opens the file in the nano text
editor. We will add those two lines, as well as a comment for each line.
Comments are useful for anyone who will need to look at the Dockerfile
in the future (this usually means you!). The comment character,
<code>#</code>, tells the computer to ignore any text that comes to the
right of the <code>#</code>, as it is for human eyes only. Note for
Dockerfiles, the <code>#</code> must come at the <em>start of the
line</em>; otherwise the pound sign (and anything to the right of it)
will be interpeted as code to run. These comments are not necessary to
build the image, but they are a <em>very</em> good practice to get into.
In the nano text editor, add the following:</p>
<pre><code># use the python base image, version 3.9
FROM python:3.9

# on container start, print the version of python
CMD ["python", "--version"]</code></pre>
<p>Which should look something like this in your terminal:</p>
<figure><img src="../fig/terminal-nano.png" alt="terminal window showing contents of Dockerfile in nano editor" class="figure mx-auto d-block"><div class="figcaption">The nano text editor for your first
Dockerfile</div>
</figure><p>Once you have that typed in, you can save and close the file. To do
this, first hold down the Control/Command key and press the letter “O”
key (this is often written as <code>^O</code>) and press “Enter” to
confirm the save to the file called “Dockerfile”. Second, to exit the
nano editor, hold down the Control/Command key and press the letter “X”
key (<code>^X</code>). If you are curious about what was saved to the
Dockerfile, you can run the command <code>cat Dockerfile</code> on the
terminal command line and it will print the contents of the file to the
screen.</p>
</div>
<div class="section level3">
<h3 id="creating-images-from-dockerfiles">Creating images from Dockerfiles<a class="anchor" aria-label="anchor" href="#creating-images-from-dockerfiles"></a></h3>
<p>We have now created the Dockerfile, and there is one last step
necessary to make the Docker image from that Dockerfile. To make the
Docker image, we use the <code>docker build</code> command and provide
it with the name of the image. In the terminal command line, run the
following command:</p>
<pre><code>docker build -t vboxuser/python-test .</code></pre>
<p>Breaking down the command into the component parts:</p>
<ul><li>
<code>docker build</code> is the base command telling our computer
to build a Docker image</li>
<li>
<code>-t</code> indicates we are going to “tag” this image with a
label</li>
<li>
<code>vboxuser/python-test</code> provides the name of the
repository (<code>vboxuser</code>) and the name of the image
(<code>python-test</code>). This convention, using the repository name
and the image name, is like using a person’s full name (family name and
given name), rather than just someone’s given name. Just using an image
name alone, without a repository name, would be like referring to
“Mohamed” or “Maria” and expecting other people to know exactly who you
are referring to.</li>
<li>
<code>.</code> is just a dot telling your computer where the
Dockerfile is located. In the command line interface, the dot is
directory where you are running the command. If the Dockerfile was
somewhere other than the folder your command line terminal is currently
running in, you would replace the dot with that location. For example,
if the Dockerfile was located on the Desktop, we would update our
command to <code>docker build -t vboxuser/python-text ~/Desktop</code>
(where the dot <code>.</code> is replaced with <code>~/Desktop</code>).
If you want to find out more about the command line interface, be sure
to check out Library Carpentry’s <a href="https://librarycarpentry.github.io/lc-shell/" class="external-link">Introduction to the
UNIX Shell Lesson</a>.</li>
</ul><div id="callout2" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>If you are doing these steps on your local machine, rather than on a
Virtual Machine, you would replace the name of the repository
(<code>vboxuser</code>) with your username for the machine you are
using.</p>
</div>
</div>
</div>
<p>When you run the <code>docker build</code> command, it will create a
new image for use on the machine. The command will likely produce quite
a bit of output to the command line terminal as it works, and it should
end with a couple of lines that look like:</p>
<pre><code> =&gt; =&gt; writing image sha256:48e8a6dc6b14b79b26ec6e5c7a5f3c48989b7f57a819262d2c26023c645cc9a6                                         0.0s
 =&gt; =&gt; naming to docker.io/vboxuser/python-test                                                                                      0.0s</code></pre>
<p>(note the values after <code>sha256</code> will be different on your
machine.)</p>
<p>You can see all the images you have available for use by running the
following in the command line terminal:</p>
<pre><code>docker image ls</code></pre>
<p>Which should produce the following output:</p>
<pre><code>REPOSITORY                 TAG       IMAGE ID       CREATED         SIZE
vboxuser/python-test       latest    48e8a6dc6b14   2 minutes ago   999MB
easypi/openrefine          latest    3ee6bb3d8cfa   3 years ago     243MB</code></pre>
<p>Note we see the image for OpenRefine that we downloaded in the
previous episode, along with the new image we just created,
python-test.</p>
<div id="challenge-1-updating-our-analogy" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-1-updating-our-analogy" class="callout-inner">
<h3 class="callout-title">Challenge 1: Updating our analogy</h3>
<div class="callout-content">
<p>In the previous episode, a couple of different analogies were
introduced to explain the relationship between a Docker image and a
Docker container. Pick one of those analogies and update it to also
include the Dockerfile.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<ul><li>To use an analogy from architecture, Dockerfiles are a file with
blueprints, images are the <em>rendered or printed</em> blueprints, and
containers are the actual building.</li>
<li>An image is a recipe, say, for your favorite curry, while the
container is the actual curry dish you can eat. In this analogy, a
Dockerfile might just be a list of ingredients and the general concept
of a curry. Granted, some of these analogies can only go so far.</li>
<li>“Think of a container as a shipping container for software - it
holds important content like files and programs so that an application
can be delivered efficiently from producer to consumer. An image is more
like a read-only manifest or schematic of what will be inside the
container.” (from <a href="https://circleci.com/blog/docker-image-vs-container/" class="external-link">Jacob
Schmitt</a>). In this case, the Dockerfile could be a template that one
uses to create the manifest or schematic.</li>
<li>If you are familiar with object-oriented programming, you can think
of a Dockerfile as an abstract superclass, an image as a class, and a
container an object of that class.</li>
</ul></div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="starting-containers">Starting containers<a class="anchor" aria-label="anchor" href="#starting-containers"></a></h3>
<p>Now that we have built the image, we want to use it! We are going to
use the same commands to start a container as we did in the previous
episode. We start by using the image to run a container with the
<code>docker run</code> command, passing also the name of the image to
use. Run the following into the command line terminal:</p>
<pre><code>docker run vboxuser/python-test</code></pre>
<p>Make sure the last part (<code>vboxuser/python-test</code>) matches
the same repository/ image combination you used when you ran the
<code>docker build</code> command.</p>
<div id="callout3" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout</h3>
<div class="callout-content">
<p>You may notice something missing from the last time we ran
<code>docker run</code>. Recall that to start the OpenRefine container,
we ran:</p>
<pre><code>docker run -p 3333:3333 easypi/openrefine</code></pre>
<p>This time, we omitted the information about ports (the
<code>-p 3333:3333</code> part) because the python-test image does not
need a way to exchange information between the container and the
computer that is running the container (in this case, the Virtual
Machine).</p>
</div>
</div>
</div>
<p>Our container is not designed to do a lot - it should only start up,
run the command to print the version of Python that is installed on the
container, and then stop the container. After issuing the
<code>docker run</code> command, we should see</p>
<pre><code>Python 3.9.21</code></pre>
<p>in the command line terminal (it is possible the exact version of
Python may be different on your machine, e.g. 3.9.23).</p>
<p>We can now check the status of our images with the
<code>docker ps</code> command. Since we want to list both running
containers and stopped containers, we need to also use the “all” option
(by adding <code>-a</code> to our command). Run the following in the
terminal command line:</p>
<pre><code>docker ps -a</code></pre>
<p>And the two containers we ran so far will be displayed in the output
table:</p>
<pre><code>CONTAINER ID   IMAGE                      COMMAND                  CREATED              STATUS                          PORTS     NAMES
fa10d154754d   jcoliver/python-test       "python --version"       About a minute ago   Exited (0) About a minute ago             charming_meitner
3ece25d51a80   easypi/openrefine          "/app/refine -i 0.0.…"   5 minutes ago        Exited (129) 5 minutes ago                kind_ardinghelli</code></pre>
<div id="challenge-2-update-base-image" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-2-update-base-image" class="callout-inner">
<h3 class="callout-title">Challenge 2: Update base image</h3>
<div class="callout-content">
<ul><li>Update the Dockerfile to have a base image that includes Python
version 3.12 (instead of Python version 3.9)</li>
<li>Build the image</li>
<li>Start the container to confirm it is using Python version 3.12</li>
</ul></div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Update the Dockerfile </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>To change the base image, update the information passed to the
<code>FROM</code> command. That is, open the Dockerfile and change this
line:</p>
<p><code>FROM python:3.9</code></p>
<p>to</p>
<p><code>FROM python:3.12</code></p>
<p>Remember to open the file in a text editor, you can type the
following in the terminal command line:</p>
<pre><code>nano Dockerfile</code></pre>
<p>To save your changes, hold down the control key and press the letter
“O” key (^O). To exit the nano text editor, use ^X (Control-X).</p>
<div class="section level3">
<h3 id="buid-the-image">Buid the image<a class="anchor" aria-label="anchor" href="#buid-the-image"></a></h3>
<p>In the terminal, use <code>docker build</code> to create a new
version of the image.</p>
<pre><code>docker build -t vboxuser/python-test</code></pre>
<p>This command will over-write the previous version of the image.</p>
</div>
<div class="section level3">
<h3 id="verify-image-was-updated">Verify image was updated<a class="anchor" aria-label="anchor" href="#verify-image-was-updated"></a></h3>
<p>In the terminal, use <code>docker run</code> to start a container
based on the updated image.</p>
<pre><code>docker run vboxuser/python-test</code></pre>
<p>You can confirm that the container has stopped running by printing
the status of all containers with the <code>docker ps</code>
command:</p>
<pre><code>docker ps -a</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="copying-files-into-the-image">Copying files into the image<a class="anchor" aria-label="anchor" href="#copying-files-into-the-image"></a></h3>
<p>The example above does not do much - it prints the version of python
installed on the container and then stops the container. We usually want
our containers to do more than this! For example, we may want to use the
container to run an analysis based on a script we have on our machine.
In this case, we would start by creating an image that <em>copied</em>
that script from our computer into the image and executing that script
when the container is run. We can do all of this by first creating that
script on the machine that will build the image (the Virtual Machine in
this case) and then updating the Dockerfile.</p>
<div class="section level4">
<h4 id="write-a-python-script">Write a python script<a class="anchor" aria-label="anchor" href="#write-a-python-script"></a></h4>
<p>Start by opening the nano text editor through the command line
terminal with the command <code>nano intro.py</code>. This creates a
blank python script called “intro.py” and opens the nano software for us
to edit the file. In that file, we are going to just add one line, to
print something when the container runs. I am going to go with the
classic “hello world”:</p>
<pre><code><span><span class="fu">print</span><span class="op">(</span><span class="st">"Hello World!"</span><span class="op">)</span></span></code></pre>
<p>Save this file with Ctrl-O and exit the nano program with Ctrl-X.</p>
</div>
<div class="section level4">
<h4 id="update-the-dockerfile-1">Update the Dockerfile<a class="anchor" aria-label="anchor" href="#update-the-dockerfile-1"></a></h4>
<p>As mentioned above, we now need to update our Dockerfile to (1) copy
that script to the image and (2) run the script when the container
starts. Once again, you can edit the Dockerfile with the nano software
by typing <code>nano Dockerfile</code> into the command line terminal.
For the first part (copying), we will use the <code>COPY</code> command
in the Dockerfile.</p>
<p>On the line right below the <code>FROM</code> command, add the copy
instructions:</p>
<pre><code># use the python base image, version 3.12
FROM python:3.12

# Copy the intro.py script onto the image
COPY intro.py .

# on container start, print the version of python
CMD ["python", "--version"]</code></pre>
<p>The <code>COPY</code> command needs two pieces of information:</p>
<ul><li>
<code>intro.py</code> this is the name of the script to copy</li>
<li>
<code>.</code> the dot tells Docker to copy the script to the home
directory on the image <em>and</em> to use the same name for the file
(“intro.py”)</li>
</ul><p>We also need to update the Dockerfile so the script actually runs! To
do this, we change our <code>CMD</code> command so that instead of
asking for the version of python, it will run the script we copied to
the image. Update the <code>CMD</code> line so instead of “–version”, it
has the name of the script in quotation marks:</p>
<pre><code># use the python base image, version 3.12
FROM python:3.12

# Copy the intro.py script onto the image
COPY intro.py .

# on container start, use python to run the python script "intro.py"
CMD ["python", "intro.py"]</code></pre>
<p>Finally, save and exit the nano editor with Ctrl-O and Ctrl-X,
respectively.</p>
</div>
<div class="section level4">
<h4 id="build-and-run-the-new-image">Build and run the new image<a class="anchor" aria-label="anchor" href="#build-and-run-the-new-image"></a></h4>
<p>And one more time we will build and run our image. Using commands
that we saw previously, on the terminal command line, first run</p>
<pre><code>docker build -t vboxuser/python-test</code></pre>
<p>to create a new version of the image. Next run</p>
<pre><code>docker run vboxuser/python-test</code></pre>
<p>to run the container. When you run the container this time, it should
not print the version of python, but rather the message “Hello
World!”</p>
<div id="challenge-3-one-more-container" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="challenge-3-one-more-container" class="callout-inner">
<h3 class="callout-title">Challenge 3: One more container</h3>
<div class="callout-content">
<p>For the last exercise, update your the Dockerfile to use Python
version 3.13 and change the message to something other than “Hello
World!” (you can have it print your name or today’s date). Once the
Dockerfile is updated, build the image, and run the container to ensure
your changes were updated.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Update the Dockerfile to use Python 3.13 </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<ul><li>Open the Dockerfile in a text editor (we have been using nano, so
you can run, in the command line terminal, <code>nano Dockerfile</code>
to open the file for editing).</li>
<li>Change the <code>FROM</code> line to read
<code>FROM python:3.13</code>
</li>
<li>Save the file (Ctrl-O in nano) and exit the text editor
(Ctrl-X).</li>
</ul><div class="section level4">
<h4 id="update-the-python-script-with-a-new-message">Update the Python script with a new message<a class="anchor" aria-label="anchor" href="#update-the-python-script-with-a-new-message"></a></h4>
<ul><li>Open the script titled “intro.py” in a text editor (we have been
using nano, so you can run, in the command line terminal,
<code>nano intro.py</code> to open the file for editing).</li>
<li>Change the message in the <code>print</code> command to something
else. If you want to print a specific date, you could update the print
command to
<code>print("Today's  date is December 16, 2024")</code>.</li>
<li>Save the file (Ctrl-O in nano) and exit the text editor
(Ctrl-X).</li>
</ul></div>
<div class="section level4">
<h4 id="build-and-run-the-new-image-1">Build and run the new image<a class="anchor" aria-label="anchor" href="#build-and-run-the-new-image-1"></a></h4>
<ul><li>Build the image with the same <code>docker build</code> command we
used previously:</li>
</ul><pre><code>docker build -t vboxuser/python-test</code></pre>
<ul><li>Start the container with the <code>docker run</code> command:</li>
</ul><pre><code>docker run vboxuser/python-test</code></pre>
<p>to run the image. Now instead of “Hello World!”, the container should
print your updated message.</p>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul><li>Dockerfiles include instructions for creating a Docker image</li>
<li>The <code>FROM</code> command in a Dockerfile indicates the base
image to build on</li>
<li>The <code>CMD</code> command in a Dockerfile includes commands to
execute when a container starts running</li>
<li>The <code>COPY</code> command in a Dockerfile copies files from your
local machine to the Docker image so they are available for use when the
container is running</li>
</ul></div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/containers-part1.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/index.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/containers-part1.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Basics of Containers
        </a>
        <a class="chapter-link float-end" href="../instructor/index.html" rel="next">
          Home
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/carpentries/workbench-template-md/edit/main/episodes/containers-part2.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/carpentries/workbench-template-md/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/carpentries/workbench-template-md/" class="external-link">Source</a></p>
				<p><a href="https://github.com/carpentries/workbench-template-md/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.12" class="external-link">sandpaper (0.16.12)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.6" class="external-link">varnish (1.0.6)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://carpentries.github.io/workbench-template-md/instructor/containers-part2.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries, containers, virtual machines, Docker, VirtualBox",
  "name": "Creating Containers with Docker",
  "creativeWorkStatus": "active",
  "url": "https://carpentries.github.io/workbench-template-md/instructor/containers-part2.html",
  "identifier": "https://carpentries.github.io/workbench-template-md/instructor/containers-part2.html",
  "dateCreated": "2025-07-02",
  "dateModified": "2025-06-24",
  "datePublished": "2025-07-02"
}

  </script><script>
		feather.replace();
	</script></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

